(self.webpackChunklite=self.webpackChunklite||[]).push([[1579],{29969:(e,n,i)=>{"use strict";i.d(n,{X:()=>T});var t=i(63038),a=i.n(t),l=i(67294),d=i(92519),o=i(83302),m=i(25735),r=i(6443),s=i(67701),c=i(77355),u=i(93310),k=i(20113),v=i(87691),N=i(18627),p=i(66411),S=i(14646),F=i(31889),E=i(34135),f=i(97217),g=i(43487),w=i(50458),_=function(e,n){return{borderTop:"1px solid ".concat(e.baseColor.border.darker),padding:"24px 0",marginBottom:"25px",minHeight:n}},V=function(e){var n=e.viewer,i=e.newsletterV3,t=e.newsletterV3LandingUrl,a=e.useCustomDomainLOFlow,m=e.isVertical,r=e.handleClick;return i?n||a?l.createElement(d.x,{newsletterV3:i,buttonStyle:"SUBTLE",redirectUrl:a?t:void 0,isVertical:m}):l.createElement(o.QL,{newsletterV3:i,isVertical:m,handleClick:r}):null},T=function(e){var n,i,t,d,o,T=e.postId,y=e.publisher,C=e.isVertical,h=void 0!==C&&C,b=l.useRef(null),R=(0,g.v9)((function(e){return e.config.authDomain})),x=(0,N.Av)(),D=(0,S.I)(),B=(0,F.F)(),L=(0,r.H)().value,P=!!(0,m.VB)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),U=l.useState(!1),O=a()(U,2),I=O[0],W=O[1],Y=l.useState("0px"),A=a()(Y,2),H=A[0],G=A[1],K=null==(0,g.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(R)),X=!L&&K&&P,Q=y.newsletterV3,Z=null==Q?void 0:Q.type,j=y.username,q=void 0===j?"":j,z=(0,w.iBn)(null!==(n=null==Q?void 0:Q.slug)&&void 0!==n?n:"",R,Z===f.Rr.NEWSLETTER_TYPE_COLLECTION?y:void 0,Z===f.Rr.NEWSLETTER_TYPE_AUTHOR&&q?q:void 0),J="Collection"===y.__typename?y:void 0,M=(0,s.gY)(J).viewerEdge;switch(Z){case f.Rr.NEWSLETTER_TYPE_COLLECTION:i="Sign up for ".concat(null==Q?void 0:Q.name),t="0px",d="You're an editor of ".concat(null==Q?void 0:Q.name),o=null==M?void 0:M.isEditor;break;case f.Rr.NEWSLETTER_TYPE_AUTHOR:i=(null==Q?void 0:Q.promoHeadline)||"Get an email whenever ".concat(y.name," publishes."),t="6px",d="You cannot subscribe to yourself",o=y.viewerEdge.isUser}I&&(i="Check your inbox.");var $=!1,ee=function(){!$&&ne()&&(x.event("newsletterV3.promoViewed",{newsletterV3Id:null==Q?void 0:Q.id,postId:T}),$=!0)},ne=function(){var e;if(!b.current)return!1;var n=null===(e=b.current)||void 0===e?void 0:e.getBoundingClientRect(),i=n.top+n.height/2;return i>=0&&i<=window.innerHeight};return l.useEffect((function(){return ee(),window&&E.V6.on("scroll",ee),function(){E.V6.off("scroll",ee)}}),[]),l.useEffect((function(){var e;if(b.current){var n=(null===(e=b.current)||void 0===e?void 0:e.getBoundingClientRect()).height;G("".concat(n,"px"))}}),[b]),Q&&l.createElement(p.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},l.createElement("div",{ref:b,className:h?void 0:D(_(B,H))},l.createElement(c.x,{paddingBottom:t},l.createElement(k.X6,{scale:"S"},i)),Z===f.Rr.NEWSLETTER_TYPE_COLLECTION&&!I&&l.createElement(l.Fragment,null,l.createElement(c.x,{paddingTop:"4px"},l.createElement(v.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(y.name))),l.createElement(c.x,{paddingTop:"8px",paddingBottom:"10px"},l.createElement(v.F,{scale:"S",color:"DARKER"},null==Q?void 0:Q.description,"Â ",l.createElement(u.r,{inline:!0,linkStyle:"OBVIOUS",href:z},"Take a look.")))),Z===f.Rr.NEWSLETTER_TYPE_AUTHOR&&(null==Q?void 0:Q.promoBody)&&!I&&l.createElement(l.Fragment,null,l.createElement(c.x,{paddingTop:"8px",paddingBottom:"8px"},l.createElement(v.F,{scale:"S",color:"DARKER"},null==Q?void 0:Q.promoBody))),o?l.createElement(c.x,{paddingTop:"10px"},l.createElement(v.F,{scale:"S",color:"DARKER"},d)):l.createElement(c.x,{display:"flex",flexWrap:"wrap"},l.createElement(V,{viewer:L,useCustomDomainLOFlow:X,newsletterV3:Q,newsletterV3LandingUrl:z,isVertical:h,handleClick:function(){return W(!0)}}))))}},19621:(e,n,i)=>{"use strict";i.d(n,{Rf:()=>v,kD:()=>k,WZ:()=>u});var t=i(319),a=i.n(t),l=i(98007),d=i(95472),o=i(31579),m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3SubscribeButton_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionDefaultBackgroundTheme_collection"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_newsletterV3"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}].concat(a()(l.Os.definitions),a()(d.Gi.definitions),a()(l.GB.definitions),a()(o.DI.definitions))},r=i(68216),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3SubscribeByEmail_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"collectionDefaultBackgroundTheme_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}}]}}].concat(a()(d.Gi.definitions),a()(r.nf.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"promoHeadline"}},{kind:"Field",name:{kind:"Name",value:"promoBody"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3SubscribeButton_newsletterV3"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3SubscribeByEmail_newsletterV3"}}]}}].concat(a()(m.definitions),a()(s.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher_User"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUser"}}]}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"}}]}}]}}].concat(a()(c.definitions))},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher_Collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"}}]}}]}}].concat(a()(c.definitions))},v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_User"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_Collection"}}]}}]}}].concat(a()(u.definitions),a()(k.definitions))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1579.d42a41fe.chunk.js.map