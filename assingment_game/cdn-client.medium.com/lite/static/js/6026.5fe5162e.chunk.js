(self.webpackChunklite=self.webpackChunklite||[]).push([[6026],{62166:(e,n,t)=>{"use strict";t.d(n,{k:()=>r});var a=t(319),i=t.n(a),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserSubdomainFlow_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"hasCompletedProfile"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserCompleteProfileDialog_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserSubdomainOnboardingDialog_user"}}]}}].concat(i()([{kind:"FragmentDefinition",name:{kind:"Name",value:"UserCompleteProfileDialog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"hasCompletedProfile"}}]}}]),i()([{kind:"FragmentDefinition",name:{kind:"Name",value:"UserSubdomainOnboardingDialog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pending"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}}]}},{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"username"}}]}}]))}},4212:(e,n,t)=>{"use strict";t.d(n,{h:()=>oe});var a,i=t(28655),r=t.n(i),l=t(63038),o=t.n(l),u=t(92471),c=t(67294),s=t(90833),d=t(21919),m=t(58875),p=t.n(m),g=t(6443),f=t(77355),v=t(93310),h=t(87691),k=t(18627),E=t(14646),x=t(21121),b=t(46696),S=function(e){return{backgroundColor:e.baseColor.background.light,borderColor:e.baseColor.border.light,borderRadius:"3px",borderWidth:"1px",alignItems:"center",padding:"25px 20px 25px 20px",marginTop:"",borderStyle:"solid"}},y=function(){var e=(0,E.I)();return c.createElement("div",{className:e([I,S])},c.createElement(f.x,{textAlign:"center"},c.createElement(f.x,null,"1000 x 1000"),c.createElement(f.x,null,"pixels")))},C=function(){return c.createElement(f.x,{marginRight:"5px",display:"inline-block"},c.createElement(h.F,{scale:"S",color:"ERROR"},"That file doesn't meet our requirements. Try another."))},N=function(){return c.createElement(f.x,{marginTop:"8px"},c.createElement(f.x,{marginRight:"5px",display:"inline-block"},c.createElement(h.F,{scale:"S",color:"ERROR"},"We couldn't process your request.")),c.createElement(f.x,{marginRight:"5px",display:"inline-block"},c.createElement(h.F,{scale:"S"},"Try again, or"," ",c.createElement(v.r,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us"},"search our help center for support."))))};!function(e){e.Success="success",e.UploadError="uploadError",e.InvalidError="invalidError"}(a||(a={}));var I={height:"132px",width:"132px",display:"flex",flexDirection:"row",justifyContent:"center"},D=function(e){var n=e.setImageId,t=e.initialImageId,i=e.source,r=(0,E.I)(),l=(0,k.Av)(),u=(0,g.H)().value,s=c.useState({imageId:t,imageWidth:0,imageHeight:0}),d=o()(s,2),m=d[0],p=d[1],h=c.useState(null),S=o()(h,2),D=S[0],w=S[1],F=function(e){w(e),l.event("user.updateAvatarResult",{userId:null==u?void 0:u.id,source:i,uploadResult:e})},T=(0,x.JA)((function(e,t,i){var r=t.height,l=t.width,o=e.value.fileId;p({imageId:o,imageHeight:r,imageWidth:l}),r<parseInt("1000px",10)||l<parseInt("1000px",10)?(F(a.InvalidError),O()):(n(o),F(a.Success),i())}),(function(){F(a.UploadError)}),(function(){F(a.InvalidError)})),R=T.inputRef,U=T.fireClick,L=function(){l.event("user.updateAvatarClick",{userId:null==u?void 0:u.id,source:i,hasImage:!!m.imageId}),U()},O=function(){p({imageId:"",imageWidth:0,imageHeight:0}),n("")},P=c.useCallback((function(){return c.createElement(f.x,{marginBottom:"10px"},c.createElement("input",{type:"file","aria-hidden":"true",ref:R,className:r({display:"none"})}),c.createElement(v.r,{inline:!0,linkStyle:"OBVIOUS",onClick:L},"Add photo"))}),[r,L,R]),A=c.useCallback((function(){return c.createElement("div",{className:r([I])},c.createElement("div",{className:r((function(){return{backgroundImage:"url(".concat((0,b.W6)({miroId:m.imageId||"",width:m.imageWidth||0,height:m.imageHeight||0}),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",height:"100%",width:"100%",borderRadius:"3px",display:"flex",flexDirection:"row"}}))}))}),[r,m]),B=c.useCallback((function(){return c.createElement(f.x,{display:"inline-block",marginBottom:"15px"},m.imageId?c.createElement(A,null):c.createElement(y,null))}),[m]);return c.createElement(f.x,{display:"flex",flexDirection:"column",maxWidth:"132px"},c.createElement(f.x,{display:"inline-block",float:"right"},c.createElement(B,null)),c.createElement(P,null),D===a.UploadError&&c.createElement(N,null),D===a.InvalidError&&c.createElement(C,null))},w=t(31708),F=function(e){var n=e.label,t=e.onChangeFn,a=e.onBlurFn,i=e.value,r=e.errorMessage,l=e.characterCountLimit;return c.createElement(c.Fragment,null,c.createElement(f.x,{marginBottom:"15px",textAlign:"left"},c.createElement(h.F,{scale:"L",tag:"h4"},n)),c.createElement(w.n,{scale:"L",onChange:t,value:i,errorMessage:r,onBlur:a,ariaLabel:n,characterCountLimit:l}))},T=t(1383),R=t(62896);function U(){var e=r()(["\n  mutation userCompleteProfileMutation(\n    $userId: ID!\n    $name: String!\n    $bio: String!\n    $imageId: String!\n  ) {\n    userCompleteProfile(userId: $userId, name: $name, bio: $bio, imageId: $imageId)\n  }\n"]);return U=function(){return e},e}function L(){var e=r()(["\n  fragment UserCompleteProfileDialog_user on User {\n    id\n    name\n    bio\n    imageId\n    hasCompletedProfile\n  }\n"]);return L=function(){return e},e}var O={min:3,max:50,message:"Please try another name that’s between 3 and 50 characters."},P={min:10,max:160,message:"Please try another description that’s between 10 and 160 characters."},A=function(e,n){var t=e.min,a=e.max,i=e.message;return function(e){var r=e.target.value;n(r.length<t||r.length>a?i:void 0)}},B=function(e){var n=(0,g.H)().value;return e?{shouldShowDialog:p().canUseDOM&&!(0,R.ic)(navigator.userAgent)&&(null==n?void 0:n.id)===e.id}:{shouldShowDialog:!1}},H=function(e){var n=e.setHasCompletedProfile,t=e.user,a=e.confirmText,i=void 0===a?"Continue":a,r=(0,k.Av)(),l=(0,g.H)().value,u=c.useState(!1),s=o()(u,2),d=s[0],m=s[1],p=V(),v=o()(p,1)[0],E=c.useState((null==t?void 0:t.imageId)||""),x=o()(E,2),b=x[0],S=x[1],y=c.useState((null==t?void 0:t.name)||""),C=o()(y,2),N=C[0],I=C[1],w=c.useState((null==t?void 0:t.bio)||""),R=o()(w,2),U=R[0],L=R[1],H=c.useState(),M=o()(H,2),_=M[0],G=M[1],W=c.useState(),$=o()(W,2),j=$[0],z=$[1],J=A(O,G),Q=A(P,z),q=c.useCallback((function(){l&&(m(!0),r.event("user.completedProfile",{userId:l.id,changedName:(null==t?void 0:t.name)!==N,changedBio:(null==t?void 0:t.bio)!==U,changedImage:(null==t?void 0:t.imageId)!==b,hasName:!!N,hasBio:!!U,hasImage:!!b}),v({variables:{userId:l.id,name:N,bio:U,imageId:b}}).then((function(){m(!1),n(!0)})))}),[l,v,m,t,N,U,b]),X=B(t).shouldShowDialog;return c.useEffect((function(){X&&r.event("user.presentedCompleteProfileDialog",{userId:null==l?void 0:l.id})}),[X]),X?c.createElement(c.Fragment,null,c.createElement(T.Q,{confirmText:i,titleText:"Complete your profile",isDestructiveAction:!1,onConfirm:q,isVisible:!0,withCloseButton:!1,showCancelButton:!1,disableConfirm:d},c.createElement(h.F,{scale:"L",color:"DARKER"},"Readers like learning a bit more about their writers"),c.createElement(f.x,{marginTop:"48px",marginBottom:"28px",display:"flex",flexDirection:"row"},c.createElement(f.x,{overflow:"visible",maxHeight:"200px"},c.createElement(D,{setImageId:S,initialImageId:b,source:"userCompleteProfileDialog"})),c.createElement(f.x,{marginLeft:"48px",textAlign:"left"},c.createElement(f.x,{key:"name"},c.createElement(F,{label:"Full name",onChangeFn:function(e){return I(e.target.value)},onBlurFn:J,value:N,errorMessage:_})),c.createElement(f.x,{key:"bio",marginTop:"40px"},c.createElement(F,{label:"Bio (optional, max 160 characters)",onChangeFn:function(e){return L(e.target.value)},onBlurFn:Q,value:U,errorMessage:j,characterCountLimit:160})))))):null},M=(0,u.Ps)(L()),V=function(){return(0,d.D)(_)},_=(0,u.Ps)(U()),G=t(23279),W=t.n(G),$=t(64718),j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateUserDomainMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"domain"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userDomainLink"},arguments:[{kind:"Argument",name:{kind:"Name",value:"domain"},value:{kind:"Variable",name:{kind:"Name",value:"domain"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CustomDomainFailure"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}}]},z=t(47230),J=t(43487),Q=t(27232),q=t(68894),X=t(50458);function Y(){var e=r()(["\n  query userDomainValidityQuery($domain: String!) {\n    userDomainValidity(domain: $domain)\n  }\n"]);return Y=function(){return e},e}function K(){var e=r()(["\n  fragment UserSubdomainOnboardingDialog_user on User {\n    id\n    customDomainState {\n      pending {\n        status\n      }\n      live {\n        status\n      }\n    }\n    username\n  }\n"]);return K=function(){return e},e}var Z=function(e){var n,t,a=e.user,i=e.isVisible,r=e.hide,l=e.redirectTo,u=e.redirectOnHide,s=void 0!==u&&u,m=e.refreshOnHide,v=void 0!==m&&m,x=e.redirectToUrl,b=(0,E.I)(),S=(0,k.Av)(),y=(0,g.H)().value,C=null!=y&&y.username?(0,Q.w)(y.username):"",N=c.useState(C),I=o()(N,2),D=I[0],F=I[1],R=(0,q.O)(!1),U=o()(R,3),L=U[0],O=U[1],P=U[2],A=c.useState(!1),B=o()(A,2),H=B[0],M=B[1],V=c.useState(!1),_=o()(V,2),G=_[0],$=_[1],Y=ae(D),K=ie(D),Z=c.useState(null),ee=o()(Z,2),te=ee[0],re=ee[1],le=(0,J.v9)((function(e){return e.config.productName})),oe=(0,d.D)(j),ue=o()(oe,1)[0],ce=ne(Y),se=ce.isValidityLoading,de=ce.validityResult,me=ce.checkValidity,pe=c.useCallback(W()((function(e){me(e),M(!1)}),500),[]),ge=c.useCallback((function(e){var n=e.target.value;H||M(!0),re(null),pe({domain:n}),F(n)}),[me,H]),fe=c.useCallback((function(){$(!0),S.event("user.claimedSubdomain",{userId:null==y?void 0:y.id,source:"subdomain_dialog",changedUsername:(null==y?void 0:y.username)!==D}),ue({variables:{domain:Y}}).then((function(e){var n,t,a,i,l="Something went wrong. Please try again with a different name.";if("CustomDomain"===(null===(n=e.data)||void 0===n||null===(t=n.userDomainLink)||void 0===t?void 0:t.__typename))O(),null==r||r();else if("CustomDomainFailure"===(null===(a=e.data)||void 0===a||null===(i=a.userDomainLink)||void 0===i?void 0:i.__typename)){var o=e.data.userDomainLink.reason||l;re(o)}else re(l);$(!1)}))}),[ue,S,y,Y,D]),ve=c.useCallback((function(){s&&l(x||K),P(),v&&window.location.reload()}),[K,s,v]),he=!(null==a||null===(n=a.customDomainState)||void 0===n||!n.pending)||!(null==a||null===(t=a.customDomainState)||void 0===t||!t.live),ke=!!y&&a.id===y.id&&!he&&p().canUseDOM;if(c.useEffect((function(){i&&ke&&S.event("user.presentedClaimSubdomainDialog",{userId:null==y?void 0:y.id})}),[i,ke]),!ke)return null;var Ee=!H&&!se&&(null==de?void 0:de.userDomainValidity);return c.createElement(c.Fragment,null,c.createElement(T.Q,{confirmText:"Claim URL",titleText:"Claim your ".concat(le," URL"),isDestructiveAction:!1,onConfirm:fe,isVisible:i,hide:r,withCloseButton:!1,showCancelButton:!1,secondaryButton:c.createElement(z.z,{href:(0,X.mcw)(),size:"REGULAR"},"Learn More"),hideOnConfirm:!1,disableConfirm:G||!!te||!Ee},"All your stories show up on your profile, and it now comes with a personalized URL. The name you pick below will also be your username on ",le,".",c.createElement(f.x,{marginBottom:"14px",marginTop:"32px",display:"flex",flexDirection:"column"},c.createElement(w.n,{ariaLabel:"Profile domain",onChange:ge,value:D,errorMessage:null!=te?te:void 0,hideErrorIcon:!0}),!te&&c.createElement(f.x,{display:"inline-block",marginTop:"8px"},c.createElement("table",{className:b({display:"table",marginLeft:"auto",marginRight:"auto",textAlign:"left",borderSpacing:"4px",tableLayout:"fixed",maxWidth:"100%"})},c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",{className:b({paddingRight:"4px",verticalAlign:"top"})},c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},c.createElement("strong",null,"URL"))),c.createElement("td",null,c.createElement(h.F,{color:"LIGHTER",scale:"M"},Y))),c.createElement("tr",null,c.createElement("td",{className:b({paddingRight:"4px",verticalAlign:"top"})},c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},c.createElement("strong",null,"Username"))),c.createElement("td",{className:b({marginBottom:"12px",marginTop:"10px"})},c.createElement(h.F,{color:"LIGHTER",scale:"M"},"@",D))),c.createElement("tr",null,c.createElement("td",null),c.createElement("td",{className:b({visibility:D===a.username?"hidden":"visible"})},c.createElement(h.F,{color:"LIGHTER",scale:"M"},"@",a.username," will no longer be valid")))))))),c.createElement(T.Q,{confirmText:"Done",titleText:"You're all set.",isDestructiveAction:!1,isVisible:L,hide:ve,withCloseButton:!1,showCancelButton:!1},"Your profile is now available at your ",le," URL.",c.createElement(f.x,null,c.createElement(f.x,{display:"inline-block",marginTop:"28px"},c.createElement("table",{className:b({display:"table",marginLeft:"auto",marginRight:"auto",textAlign:"left",tableLayout:"fixed",maxWidth:"100%"})},c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",{className:b({marginBottom:"12px",paddingRight:"8px",verticalAlign:"top"})},c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},c.createElement("strong",null,"URL"))),c.createElement("td",null,c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},Y))),c.createElement("tr",{className:b({paddingTop:"8px"})},c.createElement("td",{className:b({paddingRight:"8px",verticalAlign:"top"})},c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},c.createElement("strong",null,"Username"))),c.createElement("td",{className:b({marginBottom:"12px"})},c.createElement(h.F,{color:"LIGHTER",scale:"M",tag:"h4"},"@",D)))))))))},ee=(0,u.Ps)(K()),ne=function(e){var n=(0,$.a)(te,{variables:{domain:e},ssr:!1});return{isValidityLoading:n.loading,validityResult:n.data,checkValidity:n.refetch}},te=(0,u.Ps)(Y()),ae=function(e){var n=(0,J.v9)((function(e){return e.config.authDomain})).split(":")[0];return"".concat(e,".").concat(n)},ie=function(e){var n=(0,J.v9)((function(e){return e.config.authDomain}));return"https://".concat(e,".").concat(n)},re=t(77280);function le(){var e=r()(["\n  fragment UserSubdomainFlow_user on User {\n    id\n    hasCompletedProfile\n    name\n    bio\n    imageId\n    ...UserCompleteProfileDialog_user\n    ...UserSubdomainOnboardingDialog_user\n  }\n  ","\n  ","\n"]);return le=function(){return e},e}var oe=function(e){var n,t=e.user,a=e.redirectOnComplete,i=void 0!==a&&a,r=e.refreshOnComplete,l=void 0!==r&&r,u=e.forceVisible,d=void 0!==u&&u,m="true"===(0,re.Wd)("showDomainSetup")||d,p="true"===(0,re.Wd)("skipProfile"),g=(0,re.Wd)("redirectToUserSettings"),f=(0,J.v9)((function(e){return e.config.authDomain})),v=(0,q.O)(m),h=o()(v,2),k=h[0],E=h[1],x=c.useState(t.hasCompletedProfile),b=o()(x,2),S=b[0],y=b[1],C=c.useState(null),N=o()(C,2),I=N[0],D=N[1];g&&(n=(0,X.kdC)(f));var w=B(t).shouldShowDialog,F=!p&&w&&!S&&(!t.name||!t.bio||!t.imageId);return I?c.createElement(s.l,{to:I,replace:!0}):c.createElement(c.Fragment,null,c.createElement(Z,{isVisible:k&&!F,hide:d?void 0:E,user:t,redirectTo:D,redirectOnHide:i,refreshOnHide:l,redirectToUrl:n}),k&&F?c.createElement(H,{user:t,setHasCompletedProfile:y,confirmText:"Continue"}):null)};(0,u.Ps)(le(),M,ee)},27232:(e,n,t)=>{"use strict";t.d(n,{w:()=>a});var a=function(e){return e.toLowerCase().replace(/[_.]/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-/,"").replace(/-$/,"")}},21121:(e,n,t)=>{"use strict";t.d(n,{Dm:()=>a,JA:()=>E});var a,i=t(63038),r=t.n(i),l=t(87757),o=t.n(l),u=t(48926),c=t.n(u),s=t(94301),d=t.n(s),m=t(67294),p=t(92661);!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(a||(a={}));var g=new Set(["jpg","jpeg","png","gif"]),f=function(e){return new Promise((function(n){return setTimeout(n,e)}))},v=function(){var e=c()(o().mark((function e(n,t){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(n,{credentials:"same-origin",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","x-xsrf-token":"1","X-Obvious-CID":"web"},body:JSON.stringify({url:t})});case 2:return a=e.sent,e.next=5,a.text();case 5:return i=e.sent,e.abrupt("return",JSON.parse(i.replace("])}while(1);</x>","")));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=c()(o().mark((function e(n,t){var a,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("uploadedFile",t),e.next=4,d()(n,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:a});case 4:return i=e.sent,e.next=7,i.text();case 7:return r=e.sent,e.abrupt("return",JSON.parse(r.replace("])}while(1);</x>","")));case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k="CreateUpload",E=function(e,n,t){var i=m.useState(a.NONE),l=r()(i,2),u=l[0],s=l[1],d=m.useRef(null),E=m.useCallback((function(){d.current&&d.current.click()}),[d.current]),x=(0,p.BS)(k),b=(0,p.BS)("CreateUploadUrl");function S(){return y.apply(this,arguments)}function y(){return(y=c()(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(a.STARTING),e.next=3,f(0);case 3:s(a.UPLOADING);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=c()(o().mark((function t(i){var r,l,u,c,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:if(t.prev=2,b){t.next=5;break}throw new Error("Expected ".concat(k," route to exist"));case 5:return t.next=7,v(b.pathPattern,i);case 7:l=t.sent,u=l.success,c=l.payload,u&&null!=c&&null!==(r=c.value)&&void 0!==r&&r.fileId?((d=new Image).onload=function(){s(a.UPLOADED),e(c,{url:i,height:d.height,width:d.width},(function(){return s(a.NONE)}))},d.onerror=function(){n()},d.src=i):n(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n();case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function N(e){return I.apply(this,arguments)}function I(){return(I=c()(o().mark((function i(r){var l,u,c,d,m,p,f,v;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=null==r?void 0:r[0]){i.next=3;break}return i.abrupt("return");case 3:if(u=l.name.split(".").pop(),g.has((null==u?void 0:u.toLowerCase())||"")){i.next=7;break}return t&&t(),i.abrupt("return");case 7:return i.next=9,S();case 9:if(i.prev=9,x){i.next=12;break}throw new Error("Expected ".concat(k," route to exist"));case 12:return i.next=14,h(x.pathPattern,l);case 14:d=i.sent,m=d.success,p=d.payload,m&&null!=p&&null!==(c=p.value)&&void 0!==c&&c.md5&&(f=URL.createObjectURL(l),(v=new Image).onload=function(){s(a.UPLOADED),e(p,{file:l,height:v.height,width:v.width},(function(){return s(a.NONE)}))},v.src=f),i.next=22;break;case 19:i.prev=19,i.t0=i.catch(9),n();case 22:case"end":return i.stop()}}),i,null,[[9,19]])})))).apply(this,arguments)}function D(){N(this.files),this.value=""}return m.useEffect((function(){if(d.current)return d.current.addEventListener("change",D),function(){d.current&&d.current.removeEventListener("change",D)}}),[d.current]),{inputRef:d,fireClick:E,status:u,handleDropEvent:function(e){var n=e.dataTransfer;n&&N(n.files)},uploadUrl:function(e){return C.apply(this,arguments)}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6026.5fe5162e.chunk.js.map